<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termo de Garantia Legal - MiPlace</title>
    <!-- Incluindo o script do Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Utilizando a fonte Inter do Google Fonts para uma estética moderna -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .signature-line {
            border-bottom: 2px dashed #d1d5db;
        }
        /* Estilos para campos inválidos */
        .invalid-field {
            border-color: #ef4444 !important;
        }
        /* Estilos específicos para impressão */
        @media print {
            body {
                background-color: #fff !important;
                margin: 0;
                padding: 0;
                font-size: 10pt;
                color: #000;
            }
            .no-print {
                display: none !important;
            }
            .print-container {
                box-shadow: none !important;
                border: none !important;
                max-width: 100%;
                width: 210mm;
                /* Altura automática para permitir múltiplas páginas */
                height: auto !important; 
                margin: 0 auto;
                padding: 10mm;
            }
            
            /* Classe para forçar quebra de página */
            .force-page-break {
                page-break-before: always !important;
                break-before: page !important;
                margin-top: 0 !important;
                padding-top: 20px; /* Espaço no topo da segunda folha */
            }

            h1 { font-size: 14pt; }
            h2 { font-size: 12pt; }
            h3 { font-size: 11pt; }
            h4 { font-size: 10pt; font-weight: bold; margin-top: 10px; margin-bottom: 5px; }
            p, ul, label, input, select, li { font-size: 10pt; }
            .mb-2 { margin-bottom: 0.5rem !important; }
            .mt-4 { margin-top: 0.75rem !important; }
            .py-1 { padding-top: 0.25rem !important; padding-bottom: 0.25rem !important; }
            .border-b-2 { border-bottom-width: 1px !important; }
            input, select {
                border: none !important;
                padding: 0 !important;
                display: inline-block;
                width: auto;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                background-image: none;
            }
            .input-field-print {
                display: block !important;
                padding-bottom: 5px;
                border-bottom: 1px solid #000;
                margin-bottom: 10px;
                font-weight: bold;
            }
            .signature-line {
                border-bottom: 2px solid #000 !important;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4 font-sans text-gray-800">

    <div class="max-w-4xl mx-auto bg-white p-6 md:p-10 rounded-3xl shadow-2xl border border-gray-200 print-container">

        <!-- Seção: SELEÇÃO DE TIPO DE TERMO (Não imprime) -->
        <div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg no-print">
            <label for="term-type" class="block text-sm font-bold text-blue-800 mb-2">Selecione o Tipo de Termo de Garantia:</label>
            <select id="term-type" class="w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white font-semibold text-gray-700">
                <option value="standard">Linha Android Novo</option>
                <option value="iphone">iPhone Lacrado Garantia Apple</option>
                <option value="seminovo">iPhone Semi-novos</option>
            </select>
        </div>

        <!-- Seção: TERMO DE GARANTIA LEGAL -->
        <div class="mb-8">
            <!-- Título com o logo ao lado esquerdo -->
            <div class="text-center mb-6 flex items-center justify-center">
                <img id="logo-image" src="https://placehold.co/120x80/d1d5db/4b5563?text=Logo" alt="Placeholder para logo da loja" class="w-20 h-20 rounded-full border-2 border-gray-300 object-cover mr-4">
                <h1 id="main-title" class="text-2xl md:text-3xl font-bold text-gray-800">
                    TERMO DE GARANTIA LEGAL
                </h1>
            </div>
            <p id="miplace-info" class="text-center text-sm md:text-base text-gray-600 mt-2">
                MiPlace
            </p>
            <hr class="border-t border-gray-300 mb-6 mt-4">

            <!-- Nova seção para Dados da Venda e do Comprador -->
            <div class="mb-6 pb-6 border-b-2 border-gray-300 no-print">
                <h3 class="text-xs font-semibold mb-4 border-l-2 border-blue-500 pl-2 text-gray-700">INFORMAÇÕES DA VENDA E DO COMPRADOR</h3>
                <div class="grid grid-cols-1 gap-6 text-sm mb-4">
                    <div class="flex flex-col">
                        <label for="purchase-location" class="font-semibold text-blue-700 mb-1">Local da compra</label>
                        <select id="purchase-location" name="purchase-location" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 js-required">
                            <option value="">Selecione o local da compra</option>
                            <option value="Miplace Honor, Rua Dom Pedro II, 857 centro Piracicaba CNPJ 34511185/0001-10">Miplace Honor, Rua Dom Pedro II, 857 centro Piracicaba CNPJ 34511185/0001-10</option>
                            <option value="Miplace Realme, Rua Benjamin Constant, 1230 centro Piracicaba CNPJ 44739622/0001-01">Miplace Realme, Rua Benjamin Constant, 1230 centro Piracicaba CNPJ 44739622/0001-01</option>
                            <option value="Miplace XV, Rua XV de Novembro, 910 centro Piracicaba CNPJ 13787408/0001-05">Miplace XV, Rua XV de Novembro, 910 centro Piracicaba CNPJ 13787408/0001-05</option>
                            <option value="Miplace Premium, Rua Treze de Maio, 26 centro Amparo CNPJ 58186781/0001-30">Miplace Premium, Rua Treze de Maio, 26 centro Amparo CNPJ 58186781/0001-30</option>
                            <option value="Miplace Kassouf, Rua Treze de Maio 218 Sala 9, centro Amparo CNPJ 58495100/0001-16">Miplace Kassouf, Rua Treze de Maio 218 Sala 9, centro Amparo CNPJ 58495100/0001-16</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-sm">
                    <div class="flex flex-col">
                        <label for="buyer-name" class="font-semibold text-blue-700 mb-1">Nome do Comprador</label>
                        <input type="text" id="buyer-name" name="buyer-name" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 js-required">
                    </div>
                    <div class="flex flex-col">
                        <label for="cpf" class="font-semibold text-blue-700 mb-1">CPF</label>
                        <input type="text" id="cpf" name="cpf" maxlength="14" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 js-required">
                    </div>
                </div>
            </div>

            <!-- CONTEÚDO PADRÃO (Multimarcas) -->
            <div id="content-standard">
                <p class="text-sm text-gray-700 mb-4">
                    A MiPlace concede a presente garantia aos smartphones comercializados, em conformidade com as disposições da Lei nº 8.078/90 do Código de Defesa do Consumidor (CDC), garantindo ao consumidor cobertura contra defeitos de fabricação dentro dos prazos estabelecidos para cada marca.
                </p>

                <p class="text-sm text-gray-600 mb-6">
                    A garantia legal é de <strong>90 (noventa) dias</strong> a partir da data da compra, conforme determina o artigo 26, inciso II, do CDC. Para marcas que oferecem garantia adicional com o fabricante, a responsabilidade da MiPlace se limita aos primeiros 90 dias, sendo o período restante de responsabilidade exclusiva de cada fabricante, conforme artigo 18 do CDC.
                </p>

                <h2 class="text-lg font-bold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">Prazos de Garantia por Marca</h2>
                <ul class="list-disc pl-5 space-y-2 text-sm text-gray-600 mb-6">
                    <li><strong>Xiaomi, Redmi e Poco:</strong> <strong>90 (noventa) dias</strong> de garantia exclusiva pela MiPlace.</li>
                    <li><strong>Realme, Samsung e Motorola:</strong> Garantia total de <strong>1 (um) ano</strong>. Os primeiros <strong>3 meses</strong> são de responsabilidade da MiPlace e os 9 meses restantes de responsabilidade do fabricante.</li>
                    <li><strong>Honor:</strong> Garantia total de <strong>2 (dois) anos</strong>. Os primeiros <strong>3 meses</strong> são cobertos pela MiPlace e o período restante (1 ano e 9 meses) é de responsabilidade do fabricante.</li>
                </ul>

                <h2 class="text-lg font-bold text-gray-700 mb-3 mt-6 border-l-4 border-blue-500 pl-2">Exclusões da Garantia</h2>
                <p class="text-sm text-gray-600">
                    A garantia não cobre avarias decorrentes de <strong>mau uso, quedas, contato com líquidos, sobrecarga elétrica, intervenção técnica não autorizada</strong> ou qualquer outro dano acidental.
                </p>

                <h2 class="text-lg font-bold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">Processo de Acionamento</h2>
                <p class="text-sm text-gray-600">
                    Para acionar a garantia, o consumidor deverá apresentar o termo de garantia e encaminhar o produto para análise técnica. A MiPlace tem até <strong>30 (trinta) dias</strong> para análise e eventual reparo, substituição ou reembolso a partir da data que o consumidor reportar o defeito do aparelho.
                </p>
                <p class="text-sm text-gray-600 mt-2">
                    Este termo de garantia não exclui nem restringe os direitos assegurados ao consumidor pela legislação vigente. Para mais informações, o consumidor poderá entrar em contato com a Miplace por meio dos canais de atendimento disponíveis, incluindo e-mail, telefone ou presencialmente em loja.
                </p>
            </div>

            <!-- CONTEÚDO IPHONE LACRADO (Apple) - Inicialmente Oculto -->
            <div id="content-iphone" class="hidden">
                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA PRIMEIRA - DA GARANTIA E RESPONSABILIDADE DO FABRICANTE</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>1.1. Garantia Mundial Apple:</strong> Por tratar-se de um produto novo e lacrado, a garantia é fornecida diretamente pela fabricante (Apple Inc.), com validade de 01 (um) ano a partir da data de ativação do dispositivo no sistema da Apple.
                    </li>
                    <li>
                        <strong>1.2. Responsabilidade Exclusiva do Fabricante:</strong> A MiPlace atua estritamente como comercializadora do produto lacrado. Qualquer defeito de fabricação, vício de hardware ou falha de software deve ser tratado diretamente com o Suporte Oficial da Apple, que possui a responsabilidade integral pela cobertura e solução técnica.
                    </li>
                    <li>
                        <strong>1.3. Abrangência:</strong> A garantia cobre defeitos de fabricação e problemas de hardware conforme as diretrizes globais da Apple.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA SEGUNDA - DA CONDIÇÃO DO PRODUTO E ATIVAÇÃO</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>2.1. Produto Lacrado:</strong> O Consumidor declara ter recebido o produto em sua embalagem original, devidamente lacrada, confirmando a integridade da caixa no ato da entrega.
                    </li>
                    <li>
                        <strong>2.2. Validação da Garantia:</strong> A validação do período de garantia é realizada eletronicamente através do número de série/IMEI do aparelho, registrando-se automaticamente no sistema da Apple no momento em que o aparelho é ligado e conectado à internet pela primeira vez (Ativação).
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA TERCEIRA - EXCLUSÃO E PERDA DA GARANTIA</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>3.1.</strong> A garantia da Apple será automaticamente anulada se o produto sofrer danos acidentais não cobertos (como telas quebradas, contato com líquidos ou carcaça amassada), salvo se o cliente possuir cobertura adicional AppleCare+ contratada à parte.
                    </li>
                    <li>
                        <strong>3.2. Proibição de Intervenção Técnica:</strong> A garantia será anulada imediatamente caso o aparelho seja aberto, analisado ou reparado por qualquer assistência técnica não autorizada pela Apple, incluindo a própria loja MiPlace. O produto não deve sofrer intervenção de terceiros sob nenhuma hipótese.
                    </li>
                    <li>
                        <strong>3.3. Softwares não Oficiais:</strong> A tentativa de desbloqueios (jailbreak) ou modificações profundas no sistema operacional iOS anula o suporte e a garantia do fabricante.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA QUARTA - PROCEDIMENTO PARA ACIONAMENTO</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>4.1. Canal de Atendimento:</strong> Em caso de defeito o acionamento deve ser feito diretamente com a Apple Brasil através do telefone 0800-761-0880 ou pelo site oficial (support.apple.com), agendando atendimento em uma Apple Store ou Centro de Serviço Autorizado (AASP).
                    </li>
                    <li>
                        <strong>4.2. Isenção da Loja:</strong> A MiPlace não realiza análise técnica ou reparos em aparelhos novos/lacrados, a fim de preservar a garantia original do cliente junto ao fabricante.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA QUINTA - DA GESTÃO DA CONTA E SENHA PESSOAL</h2>
                <p class="text-sm text-gray-700 mb-6 text-justify">
                    <strong>5.1.</strong> A senha e a conta iCloud são de responsabilidade exclusiva do cliente, que as define no momento da ativação. A MiPlace não insere, armazena ou altera senhas. Qualquer bloqueio ou perda de acesso deve ser resolvido diretamente com o suporte da Apple, não havendo responsabilidade da loja por esquecimento, gerenciamento da conta ou recuperação de acesso.
                </p>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA SEXTA - DISPOSIÇÕES FINAIS</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>6.1.</strong> O presente termo visa esclarecer o fluxo de garantia direta com o fabricante, assegurando ao consumidor o acesso a peças originais e serviço autorizado.
                    </li>
                    <li>
                        <strong>6.2. Suporte:</strong> A MiPlace permanece à disposição para orientar o cliente sobre como localizar os canais de contato da Apple, caso necessário.
                    </li>
                </ul>
            </div>

            <!-- CONTEÚDO IPHONE SEMI-NOVO - Inicialmente Oculto -->
            <div id="content-seminovo" class="hidden">
                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA PRIMEIRA - PRAZO DA GARANTIA E COBERTURA DA LOJA</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>1.1. Garantia Legal:</strong> A garantia contra defeitos de fabricação para iPhones Semi-Novos é estipulada em 90 (noventa) dias corridos, a partir da data de compra.
                    </li>
                    <li>
                        <strong>1.2. Responsabilidade Exclusiva da Loja:</strong> Durante este prazo de 90 (noventa) dias, a MiPlace assume integralmente a responsabilidade pela cobertura de defeitos de fabricação que comprometam o uso adequado do aparelho.
                    </li>
                    <li>
                        <strong>1.3. Abrangência:</strong> A garantia é limitada a defeitos de hardware (peças) e funcionamento que sejam comprovadamente de origem técnica, manifestados durante o uso normal do aparelho.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA SEGUNDA - DA NATUREZA E CONDIÇÃO DO PRODUTO SEMI-NOVO</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>2.1. Ausência de Lacre Original:</strong> O Consumidor declara estar ciente e de acordo que o produto adquirido trata-se de um dispositivo SEMI-NOVO, comercializado fora de sua embalagem lacrada original de fábrica.
                    </li>
                    <li>
                        <strong>2.2. Histórico e Manutenções Prévias:</strong> Em razão de não se ter conhecimento integral sobre o histórico de uso dos proprietários anteriores, o Consumidor reconhece que o aparelho pode ter sido submetido a procedimentos de abertura de chassi, manutenções ou substituição de peças/componentes internos.
                    </li>
                    <li>
                        <strong>2.3. Aceite da Condição:</strong> O Consumidor aceita adquirir o bem no estado em que se encontra, incluindo a entrega do iPhone resetado, sem senha e sem vínculo com conta iCloud, ciente da possibilidade de existência de peças de reposição, não caracterizando tais fatos como vício oculto.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA TERCEIRA - EXCLUSÃO E PERDA DA GARANTIA</h2>
                <div class="text-sm text-gray-700 mb-6 text-justify">
                    <p class="mb-2"><strong>3.1.</strong> A presente garantia não abrange, sob nenhuma hipótese, avarias decorrentes de:</p>
                    <ul class="list-disc pl-5 space-y-1 mb-3">
                        <li>Mau uso ou desgaste natural do produto;</li>
                        <li>Quedas ou impactos;</li>
                        <li>Contato com líquidos (dano por umidade);</li>
                        <li>Sobrecarga elétrica ou variações de energia;</li>
                        <li>Intervenção técnica não autorizada (abertura, reparo ou modificação do aparelho por terceiros não credenciados);</li>
                        <li>Qualquer outra situação que caracterize dano acidental ou uso inadequado.</li>
                    </ul>
                    <p class="mb-2"><strong>3.2.</strong> A violação dos selos/lacres de garantia da MiPlace ou o manuseio indevido, incluindo tentativa de jailbreak, atualizações beta ou alteração de software de forma não oficial, anula imediatamente a garantia.</p>
                    <p><strong>3.3.</strong> A garantia não cobre a perda de dados, sendo de inteira responsabilidade do consumidor manter backups regulares de suas informações (iCloud/Computador).</p>
                </div>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA QUARTA - PROCEDIMENTO E PRAZOS</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>4.1. Acionamento:</strong> Para acionar a garantia, o consumidor deverá apresentar este termo, encaminhando o produto à MiPlace para análise técnica.
                    </li>
                    <li>
                        <strong>4.2. Prazo de Solução:</strong> Nos termos do artigo 18, §1º do Código de Defesa do Consumidor (CDC), a MiPlace dispõe do prazo legal de até 30 (trinta) dias para realizar a análise técnica e sanar o vício apresentado no produto.
                    </li>
                </ul>

                <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-1">CLÁUSULA QUINTA - DISPOSIÇÕES FINAIS</h2>
                <ul class="list-none space-y-3 text-sm text-gray-700 mb-6 text-justify">
                    <li>
                        <strong>5.1.</strong> Este termo de garantia não exclui nem restringe os direitos assegurados ao consumidor pela legislação vigente.
                    </li>
                    <li>
                        <strong>5.2. Suporte e Contato:</strong> Para mais informações ou para acionar a garantia, o consumidor poderá entrar em contato com a MiPlace através de seus canais oficiais de atendimento e redes sociais.
                    </li>
                </ul>
            </div>

            <!-- Declaração Final Dinâmica -->
            <div id="declaration-text" class="text-sm text-gray-600 mt-4 border-t pt-4">
                 <!-- O texto aqui será inserido pelo JS -->
            </div>

            <!-- Seção de assinatura -->
            <div class="mt-7 pt-4 border-t-2 border-gray-300 text-sm">
                <p class="text-gray-700 font-bold mb-2 text-center">Assinatura de ciência das informações acima,</p>
                <div class="signature-line w-full h-12 mb-4"></div>
                <div class="flex flex-col mt-2">
                    <label for="date" class="font-semibold text-blue-700 mb-1">DATA</label>
                    <input type="text" id="date" name="date" placeholder="dd/mm/yyyy" class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 js-required">
                </div>
            </div>

            <!-- Contato para Suporte com telefone dinâmico -->
            <div class="mt-6 pt-4 border-t-2 border-gray-300">
                <h3 class="text-md font-bold text-gray-700 mb-2">Contato para Suporte:</h3>
                <p class="text-sm text-gray-600">
                    <strong>Telefone:</strong> <span id="support-phone" class="font-bold"></span>
                </p>
            </div>

            <!-- NOVA SEÇÃO: DADOS PARA EMISSÃO DE NOTA FISCAL - QUEBRA DE PÁGINA AQUI -->
            <div class="mt-10 force-page-break">
                <!-- Linha grossa superior conforme imagem -->
                <div class="w-full border-t-4 border-gray-800 mb-4"></div>
                
                <h2 class="text-center text-xl font-medium text-gray-800 mb-3">DADOS PARA EMISSÃO DE NOTA FISCAL</h2>

                <!-- Separador inserido conforme solicitado -->
                <hr class="border-t border-gray-300 mb-4">

                <!-- Cabeçalho INFORMAÇÕES DO CLIENTE (Novo) -->
                <div class="flex items-center mb-3">
                    <div class="w-1 h-4 bg-blue-500 mr-2"></div>
                    <h3 class="text-sm font-bold text-gray-600 uppercase">INFORMAÇÕES DO CLIENTE</h3>
                </div>

                <!-- Campos do Comprador -->
                <div class="mb-4">
                    <!-- Linha 1: Nome (75%) e Telefone (25%) -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-3 mb-3">
                        <div class="md:col-span-3">
                            <label class="block text-sm font-bold text-blue-700 mb-1">Nome do Comprador</label>
                            <input type="text" id="nf-buyer-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div class="md:col-span-1">
                            <label class="block text-sm font-bold text-blue-700 mb-1">Telefone</label>
                            <input type="text" id="nf-buyer-phone" placeholder="(00) 00000-0000" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                    </div>

                    <!-- Linha 2: Data Nascimento, Email, CPF -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Data de Nascimento</label>
                            <input type="text" id="nf-birthdate-main" maxlength="10" placeholder="dd/mm/yyyy" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Email</label>
                            <input type="email" id="nf-email" placeholder="exemplo@email.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">CPF</label>
                            <input type="text" id="nf-cpf" maxlength="14" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                    </div>

                    <!-- Linha 3: Endereço da Residência (Novo) -->
                    <div class="mb-3 mt-3">
                        <label class="block text-sm font-bold text-blue-700 mb-1">Endereço da Residência, número e complemento</label>
                        <input type="text" id="nf-address" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                    </div>

                    <!-- Linha 4: Bairro, CEP, Cidade e Data da Compra (Novo) -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Bairro</label>
                            <input type="text" id="nf-neighborhood" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">CEP</label>
                            <input type="text" id="nf-zipcode" placeholder="00000-000" maxlength="9" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Cidade</label>
                            <input type="text" id="nf-city" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Data da Compra</label>
                            <input type="text" id="nf-purchase-date" placeholder="dd/mm/yyyy" maxlength="10" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                    </div>
                </div>

                <!-- Linha divisória para organizar as informações -->
                <hr class="border-t border-gray-300 my-4">

                <!-- Informações do Aparelho -->
                <div class="mt-2">
                    <div class="flex items-center mb-3">
                        <div class="w-1 h-4 bg-blue-500 mr-2"></div>
                        <h3 class="text-sm font-bold text-gray-600 uppercase">INFORMAÇÕES DA VENDA</h3>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Modelo Celular e Cor</label>
                            <input type="text" id="nf-model" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">IMEI</label>
                            <input type="text" id="nf-imei" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Valor do Aparelho</label>
                            <input type="text" id="nf-value" placeholder="R$ 0,00" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-blue-700 mb-1">Forma de Pagamento</label>
                            <select id="nf-payment" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                                <option value="">Selecione...</option>
                                <option value="Crefaz">Crefaz</option>
                                <option value="Dinheiro">Dinheiro</option>
                                <option value="Pix">Pix</option>
                                <option value="Crédito a vista">Crédito a vista</option>
                                <option value="Crédito parcelado">Crédito parcelado</option>
                                <option value="Débito">Débito</option>
                            </select>
                        </div>
                    </div>

                    <!-- Seção Acessórios -->
                    <div class="mt-4">
                        <div class="flex items-center mb-3">
                            <div class="w-1 h-4 bg-blue-500 mr-2"></div>
                            <h3 class="text-sm font-bold text-gray-600 uppercase">ACESSÓRIOS</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div>
                                 <label class="block text-sm font-bold text-blue-700 mb-1">Descrição dos Acessórios</label>
                                <input type="text" id="nf-accessories" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-blue-700 mb-1">Valor Total</label>
                                <input type="text" id="nf-total-value" placeholder="R$ 0,00" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white js-required">
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Mensagem de erro de validação (inicialmente oculta) -->
        <div id="validation-message" class="hidden mt-4 p-4 text-sm font-semibold text-red-700 bg-red-100 rounded-lg border border-red-300 no-print">
            Por favor, preencha todos os campos obrigatórios para poder imprimir.
        </div>

        <!-- Botões de ação -->
        <div class="mt-8 flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-4 no-print">
            <button onclick="validateAndPrint()" class="bg-blue-600 text-white text-sm font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out shadow-md transform hover:scale-105">
                Imprimir Termo
            </button>
            <button id="fill-date-btn" class="bg-green-500 text-white text-sm font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition duration-300 ease-in-out shadow-md transform hover:scale-105">
                Preencher Data de Hoje
            </button>
            <button id="clear-btn" class="bg-red-500 text-white text-sm font-bold py-3 px-6 rounded-lg hover:bg-red-600 transition duration-300 ease-in-out shadow-md transform hover:scale-105">
                Limpar Campos
            </button>
        </div>
    </div>

    <script>
        // Função para formatar a data (mantida)
        function formatDate(dateInput) {
            let value = dateInput.value.replace(/\D/g, '');
            if (value.length > 2) {
                value = value.substring(0, 2) + '/' + value.substring(2);
            }
            if (value.length > 5) {
                value = value.substring(0, 5) + '/' + value.substring(5, 9);
            }
            dateInput.value = value;
        }

        // Função para formatar Moeda (Novo)
        function formatCurrency(input) {
            let value = input.value.replace(/\D/g, '');
            
            if (value === '') {
                input.value = '';
                return;
            }
            
            // Converte para número decimal (considerando os centavos)
            let number = parseFloat(value) / 100;
            
            // Formata usando a API nativa do navegador para moeda brasileira
            input.value = number.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }
        
        // Função para formatar telefone
        function formatPhone(phoneInput) {
            let value = phoneInput.value.replace(/\D/g, '');
            if (value.length > 11) value = value.slice(0, 11); // Limita a 11 dígitos
            
            if (value.length > 2) {
                value = '(' + value.substring(0, 2) + ') ' + value.substring(2);
            }
            if (value.length > 9) {
                value = value.substring(0, 9) + '-' + value.substring(9);
            } else if (value.length > 9) { // Tratamento para fixo se necessário, mas mobile é padrão
                 // value = value.substring(0, 8) + '-' + value.substring(8);
            }
            phoneInput.value = value;
        }

        // Função para formatar o CPF
        function formatCPF(cpfInput) {
            let value = cpfInput.value.replace(/\D/g, '');
            value = value.replace(/^(\d{3})(\d)/, '$1.$2');
            value = value.replace(/^(\d{3})\.(\d{3})(\d)/, '$1.$2.$3');
            value = value.replace(/\.(\d{3})(\d)/, '.$1-$2');
            cpfInput.value = value;
        }

        // Função para formatar CEP (Novo)
        function formatCEP(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 5) {
                value = value.substring(0, 5) + '-' + value.substring(5, 8);
            }
            input.value = value;
        }

        // --- LÓGICA DE SELEÇÃO DO TIPO DE TERMO ---
        const termTypeSelect = document.getElementById('term-type');
        const contentStandard = document.getElementById('content-standard');
        const contentIphone = document.getElementById('content-iphone');
        const contentSeminovo = document.getElementById('content-seminovo');
        const mainTitle = document.getElementById('main-title');
        const declarationText = document.getElementById('declaration-text');
        
        // Elementos de entrada (para preencher o texto dinâmico)
        const buyerNameInput = document.getElementById('buyer-name');
        const cpfInput = document.getElementById('cpf');

        function updateTermContent() {
            const selectedType = termTypeSelect.value;
            const name = buyerNameInput.value || "Nome do Cliente";
            const cpf = cpfInput.value || "CPF";

            // Esconde todos inicialmente
            contentStandard.classList.add('hidden');
            contentIphone.classList.add('hidden');
            contentSeminovo.classList.add('hidden');

            if (selectedType === 'iphone') {
                // Modo iPhone Lacrado
                contentIphone.classList.remove('hidden');
                mainTitle.textContent = "TERMO DE GARANTIA - IPHONE LACRADO";
                
                // Declaração Específica iPhone Lacrado
                declarationText.innerHTML = `
                    <p class="mb-2">Eu, <span class="font-bold uppercase">${name}</span>, CPF <span class="font-bold">${cpf}</span>, confirmo que li e compreendi os termos acima.</p>
                    <p>Declaro que recebi o iPhone <strong>NOVO E LACRADO</strong>, com a embalagem intacta. Estou ciente de que a garantia é de <strong>01 (um) ano diretamente com a Apple</strong>.</p>
                `;
            } else if (selectedType === 'seminovo') {
                // Modo iPhone Semi-novo
                contentSeminovo.classList.remove('hidden');
                mainTitle.textContent = "TERMO DE GARANTIA - IPHONE SEMI-NOVO";

                // Declaração Específica iPhone Semi-novo
                declarationText.innerHTML = `
                    <p class="mb-2">Eu, <span class="font-bold uppercase">${name}</span>, CPF <span class="font-bold">${cpf}</span>, confirmo que li e compreendi integralmente os termos desta garantia limitada de 90 (noventa) dias.</p>
                    <p class="text-justify">Declaro estar expressamente ciente de que o iPhone adquirido é <strong>SEMI-NOVO</strong> e, portanto, pode ter passado por manutenções prévias ou possuir peças substituídas, tendo sido testado e aprovado funcionalmente pela loja. Confirmo que recebo o aparelho em pleno funcionamento.</p>
                `;
            } else {
                // Modo Padrão
                contentStandard.classList.remove('hidden');
                mainTitle.textContent = "TERMO DE GARANTIA LEGAL";

                // Declaração Padrão
                declarationText.innerHTML = `
                    Eu, <span class="font-bold uppercase">${name}</span>, CPF <span class="font-bold">${cpf}</span>, confirmo que li e compreendi os termos desta garantia e que o aparelho adquirido encontra-se em pleno funcionamento no momento da compra.
                `;
            }
        }

        // Listener para mudança no select
        termTypeSelect.addEventListener('change', updateTermContent);

        // Listeners para atualizar o nome/cpf em tempo real na declaração
        buyerNameInput.addEventListener('input', updateTermContent);
        cpfInput.addEventListener('input', updateTermContent);

        // Inicializa o conteúdo correto ao carregar
        updateTermContent();

        // --- FIM LÓGICA DE SELEÇÃO ---

        // Função para limpar todos os campos
        function clearFields() {
            // Seleciona tanto campos required quanto os novos da NF
            const fields = document.querySelectorAll('.js-required, input[id^="nf-"], select[id^="nf-"]');
            fields.forEach(field => {
                field.value = '';
                field.classList.remove('invalid-field');
            });
            document.getElementById('validation-message').classList.add('hidden');
            updateTermContent(); // Atualiza o texto de confirmação com os campos vazios
            // Reseta as informações da loja para o padrão
            document.getElementById('miplace-info').textContent = 'MiPlace';
            document.getElementById('support-phone').textContent = '';
            // Reseta o logo para o padrão
            document.getElementById('logo-image').src = 'https://placehold.co/120x80/d1d5db/4b5563?text=Logo';
        }

        // Função para validar e imprimir
        function validateAndPrint() {
            const fields = document.querySelectorAll('.js-required');
            let allFieldsFilled = true;

            // Limpa a formatação de erro anterior
            fields.forEach(field => {
                field.classList.remove('invalid-field');
            });

            // Verifica cada campo
            fields.forEach(field => {
                if (field.value.trim() === '') {
                    field.classList.add('invalid-field');
                    allFieldsFilled = false;
                }
            });

            const validationMessage = document.getElementById('validation-message');
            if (allFieldsFilled) {
                validationMessage.classList.add('hidden');
                window.print();
            } else {
                validationMessage.classList.remove('hidden');
                // Rola para o topo do formulário para exibir a mensagem de erro
                window.scrollTo(0, 0);
            }
        }

        // Event listener para o campo de data
        const dateInput = document.getElementById('date');
        dateInput.addEventListener('keyup', () => formatDate(dateInput));
        
        // --- Novos Event Listeners para a seção NF ---
        const nfBirthMainInput = document.getElementById('nf-birthdate-main');
        nfBirthMainInput.addEventListener('keyup', () => formatDate(nfBirthMainInput));

        // Listener para o novo campo Data da Compra
        const nfPurchaseDateInput = document.getElementById('nf-purchase-date');
        nfPurchaseDateInput.addEventListener('keyup', () => formatDate(nfPurchaseDateInput));

        const nfBuyerPhoneInput = document.getElementById('nf-buyer-phone');
        nfBuyerPhoneInput.addEventListener('input', () => formatPhone(nfBuyerPhoneInput));

        const nfCpfInput = document.getElementById('nf-cpf');
        nfCpfInput.addEventListener('input', () => formatCPF(nfCpfInput));

        // Adiciona o listener para o campo de Valor do Aparelho
        const nfValueInput = document.getElementById('nf-value');
        nfValueInput.addEventListener('input', () => formatCurrency(nfValueInput));

        // Adiciona o listener para o novo campo de Valor Total (Acessórios)
        const nfTotalValueInput = document.getElementById('nf-total-value');
        nfTotalValueInput.addEventListener('input', () => formatCurrency(nfTotalValueInput));

        // Adiciona o listener para o campo de CEP (Novo)
        const nfZipcodeInput = document.getElementById('nf-zipcode');
        nfZipcodeInput.addEventListener('input', () => formatCEP(nfZipcodeInput));
        
        // Botão para preencher a data atual
        document.getElementById('fill-date-btn').addEventListener('click', () => {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${day}/${month}/${year}`;
            
            dateInput.value = formattedDate;
            // Preenche automaticamente também a Data da Compra na seção da NF
            nfPurchaseDateInput.value = formattedDate;
        });
        
        // Sincronização automática opcional:
        // Se desejar que o Nome e CPF de cima preencham os de baixo automaticamente
        buyerNameInput.addEventListener('input', () => {
            document.getElementById('nf-buyer-name').value = buyerNameInput.value;
        });
        
        cpfInput.addEventListener('input', () => {
            document.getElementById('nf-cpf').value = cpfInput.value;
        });


        // Botão para limpar campos
        document.getElementById('clear-btn').addEventListener('click', clearFields);

        // Obtém os elementos para exibir a localização e o telefone
        const purchaseLocationSelect = document.getElementById('purchase-location');
        const miplaceInfo = document.getElementById('miplace-info');
        const supportPhoneSpan = document.getElementById('support-phone');

        // Mapa de telefones por local de compra
        const phoneMap = {
            "Miplace Honor, Rua Dom Pedro II, 857 centro Piracicaba CNPJ 34511185/0001-10": "(19) 99497-5131 - Miplace Honor CNPJ 34.511.185/0001-10",
            "Miplace Realme, Rua Benjamin Constant, 1230 centro Piracicaba CNPJ 44739622/0001-01": "(19) 99451-0123 - Miplace Realme CNPJ 44.739.622/0001-01",
            "Miplace XV, Rua XV de Novembro, 910 centro Piracicaba CNPJ 13787408/0001-05": "(19) 99152-2724 - Miplace XV CNPJ 13.787.408/0001-05",
            "Miplace Premium, Rua Treze de Maio, 26 centro Amparo CNPJ 58186781/0001-30": "(19) 99961-8865 - Miplace Premium CNPJ 58.186.781/0001-30 ",
            "Miplace Kassouf, Rua Treze de Maio 218 Sala 9, centro Amparo CNPJ 58495100/0001-16": "(19) 97107-7066 - Miplace Kassouf CNPJ 58.495.100/0001-16"
        };
        
        // Mapa de logos por local de compra, com URLs acessíveis
        const logoMap = {
            "Miplace Honor, Rua Dom Pedro II, 857 centro Piracicaba CNPJ 34511185/0001-10": "dp (1).jpg",
            "Miplace Realme, Rua Benjamin Constant, 1230 centro Piracicaba CNPJ 44739622/0001-01": "realme (1).jpg",
            "Miplace XV, Rua XV de Novembro, 910 centro Piracicaba CNPJ 13787408/0001-05": "xv (1).jpg",
            "Miplace Premium, Rua Treze de Maio, 26 centro Amparo CNPJ 58186781/0001-30": "pr (1).jpg",
            "Miplace Kassouf, Rua Treze de Maio 218 Sala 9, centro Amparo CNPJ 58495100/0001-16": "kf (1).jpg"
        };

        // Event listener para o campo de seleção de local de compra
        purchaseLocationSelect.addEventListener('change', () => {
            const selectedValue = purchaseLocationSelect.value;
            const selectedText = purchaseLocationSelect.options[purchaseLocationSelect.selectedIndex].text;
            const logoImage = document.getElementById('logo-image');

            // Atualiza o nome da loja no termo de garantia
            if (selectedText === "Selecione o local da compra") {
                miplaceInfo.textContent = 'MiPlace';
            } else {
                miplaceInfo.textContent = selectedText;
            }

            // Atualiza o telefone de contato com base no mapa
            const newPhoneNumber = phoneMap[selectedValue];
            if (newPhoneNumber) {
                supportPhoneSpan.textContent = newPhoneNumber;
            } else {
                // Se nenhuma loja válida for selecionada, remove o número de telefone.
                supportPhoneSpan.textContent = '';
            }

            // Atualiza o logo com base no mapa
            if (logoMap[selectedValue]) {
                logoImage.src = logoMap[selectedValue];
            } else {
                logoImage.src = "https://placehold.co/120x80/d1d5db/4b5563?text=Logo";
            }
        });
    </script>
</body>
</html>